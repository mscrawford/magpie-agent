{
  "_comment": "Tracks synchronization between MAgPIE codebase and agent documentation",
  "_instructions": "Update this file whenever syncing with MAgPIE develop branch",
  
  "sync_status": {
    "last_sync_date": "2026-01-20",
    "last_sync_commit": "ba821a980",
    "last_sync_commit_date": "2026-01-13",
    "last_sync_commit_message": "Merge pull request #860 from pascal-sauer/develop",
    "synced_by": "AI agent",
    "magpie_branch": "develop"
  },
  
  "pending_review": {
    "_comment": "Commits that have been identified but not yet integrated into documentation",
    "commits": [
      {
        "commit": "480e300b1",
        "date": "2025-12-19",
        "description": "f_btc2 - conservation tau for croparea",
        "modules_affected": ["13_tc", "14_yields", "29_cropland"],
        "doc_update_needed": true,
        "doc_update_status": "pending",
        "notes": "Major rework: new tautype dimension, v13_tau_core/v13_tau_consv variables, p13_croparea_consv_tau_factor, q13_tau_consv equation. Module 13, 14, 29 documentation needs update."
      },
      {
        "commit": "a6f114383",
        "date": "2026-01-03",
        "description": "bugfix residues for 2nd gen off",
        "modules_affected": ["60_bioenergy", "32_forestry"],
        "doc_update_needed": false,
        "doc_update_status": "n/a",
        "notes": "Presolve bug fix for historical time steps, adds conditional for residue assumptions"
      }
    ]
  },
  
  "recent_syncs": [
    {
      "date": "2026-01-20",
      "commit_range": "3e0478c83..ba821a980",
      "changes_reviewed": [
        {
          "commit": "480e300b1",
          "date": "2025-12-19",
          "description": "f_btc2 - conservation tau for croparea implementation",
          "modules_affected": ["13_tc", "14_yields", "29_cropland"],
          "doc_update_needed": true,
          "doc_update_status": "pending",
          "notes": "Major feature: new tautype dimension (crop/past), v13_tau_core, v13_tau_consv, q13_tau, q13_tau_consv equations. Needs module doc updates."
        },
        {
          "commit": "a6f114383",
          "date": "2026-01-03",
          "description": "bugfix residues for 2nd gen off",
          "modules_affected": ["60_bioenergy", "32_forestry"],
          "doc_update_needed": false,
          "doc_update_status": "n/a",
          "notes": "Presolve conditional for historical time steps"
        },
        {
          "commit": "ba821a980",
          "date": "2026-01-13",
          "description": "PR template updates",
          "modules_affected": [],
          "doc_update_needed": false,
          "doc_update_status": "n/a",
          "notes": "GitHub workflow changes only"
        }
      ],
      "summary": "Identified major module 13_tc rework (conservation tau). Modules 13, 14, 29 flagged for doc update. Other changes are config/workflow updates."
    },
    {
      "date": "2025-11-29",
      "commit_range": "up to 3e0478c83",
      "changes_reviewed": [
        {
          "commit": "9ccd6290d",
          "date": "2025-11-28",
          "description": "Fix parenthesis placement in forestry discounting formula",
          "modules_affected": ["32_forestry"],
          "doc_update_needed": true,
          "doc_update_status": "complete",
          "notes": "Updated module_32.md with corrected equation formula"
        },
        {
          "commit": "1a705cc96",
          "date": "2025-11-20",
          "description": "sleep comments",
          "modules_affected": [],
          "doc_update_needed": false,
          "doc_update_status": "n/a",
          "notes": "Code comments only, no doc update needed"
        },
        {
          "commit": "4c430c065",
          "date": "2025-11-18",
          "description": "withr::defer remove f32_max_aff_area.cs4",
          "modules_affected": ["32_forestry"],
          "doc_update_needed": false,
          "doc_update_status": "n/a",
          "notes": "R preprocessing change, not GAMS model logic"
        },
        {
          "commit": "8ec852148",
          "date": "2025-11-14",
          "description": "update scenario and FSEC cfg csv",
          "modules_affected": [],
          "doc_update_needed": false,
          "doc_update_status": "n/a",
          "notes": "Configuration files only"
        },
        {
          "commit": "525f782c7",
          "date": "2025-11-13",
          "description": "update inputdata and changelog",
          "modules_affected": [],
          "doc_update_needed": false,
          "doc_update_status": "n/a",
          "notes": "Input data version bump"
        }
      ],
      "summary": "Reviewed 5 substantive commits. Updated module_32.md with forestry discounting fix."
    }
  ],
  
  "documentation_baseline": {
    "_comment": "When core documentation was last fully verified against code",
    "modules_verified_date": "2025-10-13",
    "modules_verified_commit": "unknown - pre-tracking",
    "cross_module_verified_date": "2025-10-22",
    "full_audit_date": "2025-11-29",
    "full_audit_result": "Only 1 GAMS change since 2025-10-13 (forestry fix) - already synced",
    "notes": "All 46 modules verified current as of 2025-11-29"
  },
  
  "module_sync_status": {
    "_comment": "Track which modules may need updates based on code changes",
    "potentially_stale": [
      {
        "module": "13_tc",
        "reason": "Major rework in f_btc2 - new tautype dimension, conservation tau equations",
        "commit": "480e300b1"
      },
      {
        "module": "14_yields",
        "reason": "Changes to input.gms and equations related to tautype",
        "commit": "480e300b1"
      },
      {
        "module": "29_cropland",
        "reason": "Presolve changes for conservation croparea",
        "commit": "480e300b1"
      }
    ],
    "recently_updated": [
      {
        "module": "32_forestry",
        "update_date": "2025-11-29",
        "reason": "Synced equation fix from commit 9ccd6290d",
        "commit": "9ccd6290d"
      }
    ],
    "verified_current": "43_of_46_modules",
    "last_full_audit": "2026-01-20"
  },
  
  "sync_workflow": {
    "description": "How to keep documentation in sync with MAgPIE code",
    "steps": [
      "1. Run 'git log develop --oneline -N' to see recent commits",
      "2. Identify commits that affect GAMS modules (not just R scripts, configs)",
      "3. For each relevant commit, check if it changes equations, parameters, or logic",
      "4. Update this sync_log.json with findings",
      "5. If doc updates needed, update the relevant module_XX.md files",
      "6. Mark updates complete in this log"
    ],
    "triggers_for_doc_update": [
      "New or modified equations (*.gms files)",
      "Changed parameters or their domains",
      "New interface variables",
      "Modified module dependencies",
      "Renamed or restructured modules"
    ],
    "no_doc_update_needed": [
      "R preprocessing scripts (*.R)",
      "Configuration files (*.cfg, *.csv)",
      "Input data version bumps",
      "Changelog updates",
      "Comments-only changes",
      "Test configuration changes"
    ]
  }
}
